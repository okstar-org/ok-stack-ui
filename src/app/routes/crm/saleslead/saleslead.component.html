<breadcrumb></breadcrumb>

<div fxLayout="row wrap" class="matero-row">
  <div fxFlex="100" class="matero-col">
    <mat-card>
      <!-- <mat-card-title>Form Inline</mat-card-title> -->
      <form [formGroup]="group">
        <mat-form-field class="m-r-8">
          <input matInput placeholder="关键词"
          formControlName="keyword" name="keyword">
        </mat-form-field>

        <mat-form-field class="m-r-8" *ngIf="backParams && backParams['select']">
          <mat-label>线索来源</mat-label>
          <mat-select formControlName="leadFrom" name="leadFrom">
            <mat-option>全部</mat-option>
            <mat-option *ngFor="let item of backParams.select.leadFrom"
              [value]="item">
                {{item}}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="m-r-8" *ngIf="backParams && backParams['select']">
          <mat-label>线索状态</mat-label>
          <mat-select formControlName="leadState" name="state">
            <mat-option >全部</mat-option>
            <mat-option *ngFor="let item of backParams.select.leadState"
            [value]="item">
              {{item}}
          </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="m-r-8">
          <input matInput placeholder="归属人员"
          formControlName="ownerName" name="ownerName">
        </mat-form-field>

        <mat-form-field class="m-r-8">
          <mat-placeholder>最后跟进</mat-placeholder>
          <mat-datepicker-toggle [for]="datetimePicker" matSuffix></mat-datepicker-toggle>
          <mat-datepicker #datetimePicker
            startView="month"
            type="date"></mat-datepicker>
          <input  [matDatepicker]="datetimePicker"
                 autocomplete="off" formControlName="lastFollowUpTime"
                 matInput>
       </mat-form-field>

        <button mat-stroked-button color="primary" (click)="search()" class="m-x-8">
          <mat-icon>search</mat-icon>Search</button>
        <button mat-stroked-button color="primary" (click)="reset()" class="m-x-8">
          <mat-icon class="mat-12">autorenew</mat-icon>Reset</button>
      </form>

    </mat-card>

    <mat-card>

      <mat-card class="ctrl-button-area">
        <button mat-stroked-button color="primary" (click)="add()" class="m-x-8" >
          <mat-icon class="icon-12">add</mat-icon>添加
        </button>
        <button mat-stroked-button color="primary" (click)="import()" class="m-x-8" >
          <mat-icon class="icon-8">get_app</mat-icon>导入</button>
        <button mat-stroked-button color="primary" (click)="export()" class="m-x-8" >
          <mat-icon class="icon-8" >publish</mat-icon>导出</button>
        <button mat-stroked-button color="primary" (click)="change()" class="m-x-8" >
          <mat-icon class="icon-8" >person_add</mat-icon>转为客户</button>
        <button mat-stroked-button color="primary" (click)="newTask()" class="m-x-8" >
          <mat-icon class="icon-8" >list</mat-icon>新建任务</button>
        <button mat-stroked-button color="primary" (click)="sendMessage()" class="m-x-8" >
          <mat-icon class="icon-8" >chat_bubble_outline</mat-icon>发送短信</button>
      </mat-card>

      <mtx-grid
          [toolbarTitle]="'销售线索'"
          [data]="list"
          [columns]="columns"
          [length]="total"
          [loading]="isLoading"
          [showToolbar]="showToolbar"
          [rowSelectable]="rowSelectable"
          [columnHideable]="columnHideable"
          [columnMovable]="columnMovable"
          [multiSelectable]="multiSelectable"
          [pageOnFront]="false"
          [pageIndex]="pageIndex"
          [pageSize]="pageSize"
          [pageSizeOptions]="[5,10,20]"
          (sortChange)="changeSort($event)"
          (page)="getNextPage($event)"
          >
      </mtx-grid>
    </mat-card>
  </div>
</div>

