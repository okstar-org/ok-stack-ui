<mat-card>
  <div class="ok-content-box">
    <div class="ok-content-title">
      <ul class="ok-item-list">
        <li>
          <mat-icon class="icon-40">bookmark</mat-icon>
        </li>
        <li>
          {{ "crm.opportunity.title" | translate }}
        </li>
      </ul>
    </div>
    <div class="ok-content-wrapper">

      <div class="ok-search-controls">
        <app-ok-search [formGroup]="group" [controls]="searchControls"></app-ok-search>
        <button mat-button mat-raised-button class="m-8" (click)="onSearch()">{{"common.search" |
          translate}}</button>
      </div>

      <mtx-grid
                [toolbarTitle]="'crm.opportunity.title' | translate"
                [data]="list"
                [columns]="columns"
                [length]="total"
                [loading]="isLoading"
                [showToolbar]="showToolbar"
                [rowSelectable]="rowSelectable"
                [columnHideable]="columnHideable"
                [columnSortable]="columnMovable"
                [multiSelectable]="multiSelectable"
                [pageOnFront]="false"
                [pageIndex]="pageIndex"
                [pageSize]="pageSize"
                [pageSizeOptions]="[5,10,20]"
                (sortChange)="changeSort($event)"
                (page)="getNextPage($event)"
                [cellTemplate]="{createdAt: createdAtTpl}">
      </mtx-grid>

      <ng-template #createdAtTpl let-row let-index="index" let-col="colDef">
        {{ row.createdAt | date:'y-M-d HH:mm:ss z'}}
      </ng-template>

    </div>

  </div>
</mat-card>
